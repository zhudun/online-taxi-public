<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>
<h1>司机监听测试页面-模拟司机客户端</h1>
<button onclick="setMessageContent('鼠标点我了')">测试message展示</button>
<div id="message">展示服务的推送过来消息的地方</br></div>

<script>
    driverId = 1;
    if(window.EventSource){
        console.info("此浏览器支持SSE");
        // 连接的建立
        source = new EventSource("http://localhost:9000/connect/"+driverId);
        // 监听服务的推送的消息
        source.addEventListener("message",function (e){
            content = e.data;
            console.info("消息内容："+content);

            setMessageContent(content);
        });
    }else {
        setMessageContent("此浏览器不支持");
    }
    function setMessageContent(content){
        document.getElementById("message").innerHTML+= (content+'</br>');
    }
</script>
</body>
</html>